


This is TiOS, uCore with SMP support
Shichao Yue


memory management: default_pmm_manager
check_alloc_page() succeeded!
check_pgdir() succeeded!
check_boot_pgdir() succeeded!
use SLOB allocator
kmalloc_init() succeeded!
============================
There are 1 cpu
============================
============================
SMP Coming Soon
============================
check_vma_struct() succeeded!
page fault
page fault at 0x00000100: K/W [no page found].
check_pgfault() succeeded!
check_vmm() succeeded.
sched class: stride_scheduler
ide 0:      10000(sectors), 'QEMU HARDDISK'.
ide 1:     262144(sectors), 'QEMU HARDDISK'.
ide 2:     262144(sectors), 'QEMU HARDDISK'.
SWAP: manager = fifo swap manager
sfs: mount: 'simple file system' (262/32506/32768)
vfs: mount disk0.
startothers
============================
SMP Coming!!!!!!, 0xc0346008
============================
init proc: 2
================cpu0: starting=================
I am No.4 philosopher_condvar
Iter 1, No.4 philosopher_condvar is thinking
I am No.3 philosopher_condvar
Iter 1, No.3 philosopher_condvar is thinking
I am No.2 philosopher_condvar
Iter 1, No.2 philosopher_condvar is thinking
I am No.1 philosopher_condvar
Iter 1, No.1 philosopher_condvar is thinking
I am No.0 philosopher_condvar
Iter 1, No.0 philosopher_condvar is thinking
I am No.4 philosopher_sema
Iter 1, No.4 philosopher_sema is thinking
I am No.3 philosopher_sema
Iter 1, No.3 philosopher_sema is thinking
I am No.2 philosopher_sema
Iter 1, No.2 philosopher_sema is thinking
I am No.1 philosopher_sema
Iter 1, No.1 philosopher_sema is thinking
I am No.0 philosopher_sema
Iter 1, No.0 philosopher_sema is thinking
kernel_execve: pid = 3, name = "matrix".

This is run on CPU: #0
fork ok.
pid 14 is running (1000 times)!.
Iter 1, No.0 philosopher_sema is eating
Iter 1, No.2 philosopher_sema is eating
phi_test_condvar: state_condvar[0] will eating
phi_test_condvar: signal self_cv[0] 
cond_signal begin: cvp c0346b30, cvp->count 0, cvp->owner->next_count 0
cond_signal end: cvp c0346b30, cvp->count 0, cvp->owner->next_count 0
Iter 1, No.0 philosopher_condvar is eating
Iter 1, No.1 philosopher_condvar is eating
phi_test_condvar: state_condvar[2] will eating
phi_test_condvar: signal self_cv[2] 
cond_signal begin: cvp c0346bb8, cvp->count 0, cvp->owner->next_count 0
cond_signal end: cvp c0346bb8, cvp->count 0, cvp->owner->next_count 0
Iter 1, No.2 philosopher_condvar is eating
Iter 1, No.3 philosopher_condvar is eating
Iter 1, No.4 philosopher_condvar is eating
pid 16 is running (1100 times)!.
pid 15 is running (1000 times)!.
pid 15 done!.
pid 18 is running (4600 times)!.
pid 20 is running (20600 times)!.
pid 17 is running (1900 times)!.
pid 19 is running (11000 times)!.
pid 21 is running (37100 times)!.
pid 22 is running (2600 times)!.
pid 23 is running (13100 times)!.
pid 25 is running (4600 times)!.
pid 27 is running (2600 times)!.
pid 24 is running (37100 times)!.
pid 29 is running (4600 times)!.
pid 31 is running (13100 times)!.
pid 34 is running (13100 times)!.
pid 26 is running (23500 times)!.
pid 28 is running (23500 times)!.
pid 30 is running (33400 times)!.
pid 32 is running (2600 times)!.
pid 33 is running (26600 times)!.
Iter 2, No.3 philosopher_condvar is thinking
pid 17 done!.
Iter 2, No.2 philosopher_condvar is thinking
Iter 2, No.0 philosopher_sema is thinking
Iter 1, No.4 philosopher_sema is eating
Iter 2, No.2 philosopher_sema is thinking
Iter 1, No.1 philosopher_sema is eating
Iter 2, No.4 philosopher_condvar is thinking
phi_test_condvar: state_condvar[1] will eating
phi_test_condvar: signal self_cv[1] 
cond_signal begin: cvp c0346b74, cvp->count 0, cvp->owner->next_count 0
cond_signal end: cvp c0346b74, cvp->count 0, cvp->owner->next_count 0
Iter 2, No.0 philosopher_condvar is thinking
pid 16 done!.
Iter 2, No.1 philosopher_condvar is thinking
pid 14 done!.
phi_test_condvar: state_condvar[1] will eating
phi_test_condvar: signal self_cv[1] 
cond_signal begin: cvp c0346b74, cvp->count 0, cvp->owner->next_count 0
cond_signal end: cvp c0346b74, cvp->count 0, cvp->owner->next_count 0
Iter 2, No.1 philosopher_condvar is eating
Iter 2, No.0 philosopher_condvar is eating
phi_test_condvar: state_condvar[4] will eating
phi_test_condvar: signal self_cv[4] 
cond_signal begin: cvp c0346c40, cvp->count 0, cvp->owner->next_count 0
cond_signal end: cvp c0346c40, cvp->count 0, cvp->owner->next_count 0
Iter 2, No.4 philosopher_condvar is eating
Iter 2, No.4 philosopher_sema is thinking
Iter 1, No.3 philosopher_sema is eating
pid 22 done!.
Iter 2, No.3 philosopher_sema is thinking
Iter 2, No.2 philosopher_condvar is eating
pid 27 done!.
Iter 2, No.1 philosopher_sema is thinking
Iter 2, No.0 philosopher_sema is eating
Iter 2, No.3 philosopher_condvar is eating
Iter 3, No.3 philosopher_condvar is thinking
Iter 3, No.0 philosopher_condvar is thinking
Iter 3, No.0 philosopher_sema is thinking
Iter 2, No.2 philosopher_sema is eating
phi_test_condvar: state_condvar[2] will eating
phi_test_condvar: signal self_cv[2] 
cond_signal begin: cvp c0346bb8, cvp->count 0, cvp->owner->next_count 0
cond_signal end: cvp c0346bb8, cvp->count 0, cvp->owner->next_count 0
Iter 3, No.1 philosopher_condvar is thinking
Iter 2, No.4 philosopher_sema is eating
Iter 3, No.2 philosopher_condvar is thinking
Iter 3, No.4 philosopher_condvar is thinking
phi_test_condvar: state_condvar[4] will eating
phi_test_condvar: signal self_cv[4] 
cond_signal begin: cvp c0346c40, cvp->count 0, cvp->owner->next_count 0
cond_signal end: cvp c0346c40, cvp->count 0, cvp->owner->next_count 0
Iter 3, No.4 philosopher_condvar is eating
pid 18 done!.
phi_test_condvar: state_condvar[2] will eating
phi_test_condvar: signal self_cv[2] 
cond_signal begin: cvp c0346bb8, cvp->count 0, cvp->owner->next_count 0
cond_signal end: cvp c0346bb8, cvp->count 0, cvp->owner->next_count 0
Iter 3, No.2 philosopher_condvar is eating
Iter 3, No.1 philosopher_condvar is eating
Iter 3, No.0 philosopher_condvar is eating
Iter 3, No.4 philosopher_sema is thinking
Iter 3, No.2 philosopher_sema is thinking
Iter 2, No.3 philosopher_sema is eating
Iter 2, No.1 philosopher_sema is eating
pid 32 done!.
Iter 3, No.3 philosopher_condvar is eating
pid 25 done!.
pid 29 done!.
Iter 3, No.1 philosopher_sema is thinking
Iter 3, No.0 philosopher_sema is eating
Iter 3, No.3 philosopher_sema is thinking
Iter 4, No.1 philosopher_condvar is thinking
Iter 4, No.3 philosopher_condvar is thinking
Iter 4, No.0 philosopher_condvar is thinking
Iter 4, No.2 philosopher_condvar is thinking
Iter 4, No.4 philosopher_condvar is thinking
phi_test_condvar: state_condvar[4] will eating
phi_test_condvar: signal self_cv[4] 
cond_signal begin: cvp c0346c40, cvp->count 0, cvp->owner->next_count 0
cond_signal end: cvp c0346c40, cvp->count 0, cvp->owner->next_count 0
Iter 4, No.4 philosopher_condvar is eating
phi_test_condvar: state_condvar[2] will eating
phi_test_condvar: signal self_cv[2] 
cond_signal begin: cvp c0346bb8, cvp->count 0, cvp->owner->next_count 0
cond_signal end: cvp c0346bb8, cvp->count 0, cvp->owner->next_count 0
Iter 4, No.2 philosopher_condvar is eating
Iter 4, No.3 philosopher_condvar is eating
Iter 4, No.0 philosopher_sema is thinking
Iter 3, No.4 philosopher_sema is eating
Iter 3, No.2 philosopher_sema is eating
Iter 4, No.1 philosopher_condvar is eating
Iter 4, No.0 philosopher_condvar is eating
No.0 philosopher_condvar quit
No.1 philosopher_condvar quit
Iter 4, No.4 philosopher_sema is thinking
Iter 4, No.0 philosopher_sema is eating
No.3 philosopher_condvar quit
No.2 philosopher_condvar quit
Iter 4, No.2 philosopher_sema is thinking
Iter 3, No.3 philosopher_sema is eating
No.4 philosopher_condvar quit
No.0 philosopher_sema quit
Iter 3, No.1 philosopher_sema is eating
Iter 4, No.1 philosopher_sema is thinking
Iter 4, No.3 philosopher_sema is thinking
Iter 4, No.2 philosopher_sema is eating
Iter 4, No.4 philosopher_sema is eating
No.4 philosopher_sema quit
No.2 philosopher_sema quit
Iter 4, No.3 philosopher_sema is eating
Iter 4, No.1 philosopher_sema is eating
No.3 philosopher_sema quit
No.1 philosopher_sema quit
pid 19 done!.
pid 34 done!.
pid 23 done!.
pid 31 done!.
pid 20 done!.
pid 26 done!.
pid 28 done!.
pid 33 done!.
pid 30 done!.
pid 21 done!.
pid 24 done!.
matrix pass.
sfs: cleanup: 'simple file system' (262/32506/32768)
all user-mode processes have quit.
init check memory pass.
kernel panic at kern/process/proc.c:468:
    initproc exit.

Welcome to the kernel debug monitor!!
Type 'help' for a list of commands.
K> 