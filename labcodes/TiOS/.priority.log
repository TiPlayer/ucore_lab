


This is TiOS, uCore with SMP support
Shichao Yue


memory management: default_pmm_manager
check_alloc_page() succeeded!
check_pgdir() succeeded!
check_boot_pgdir() succeeded!
use SLOB allocator
kmalloc_init() succeeded!
============================
There are 1 cpu
============================
============================
SMP Coming Soon
============================
check_vma_struct() succeeded!
page fault
page fault at 0x00000100: K/W [no page found].
check_pgfault() succeeded!
check_vmm() succeeded.
sched class: stride_scheduler
ide 0:      10000(sectors), 'QEMU HARDDISK'.
ide 1:     262144(sectors), 'QEMU HARDDISK'.
ide 2:     262144(sectors), 'QEMU HARDDISK'.
SWAP: manager = fifo swap manager
sfs: mount: 'simple file system' (262/32506/32768)
vfs: mount disk0.
startothers
============================
SMP Coming!!!!!!, 0xc0346008
============================
init proc: 2
================cpu0: starting=================
I am No.4 philosopher_condvar
Iter 1, No.4 philosopher_condvar is thinking
I am No.3 philosopher_condvar
Iter 1, No.3 philosopher_condvar is thinking
I am No.2 philosopher_condvar
Iter 1, No.2 philosopher_condvar is thinking
I am No.1 philosopher_condvar
Iter 1, No.1 philosopher_condvar is thinking
I am No.0 philosopher_condvar
Iter 1, No.0 philosopher_condvar is thinking
I am No.4 philosopher_sema
Iter 1, No.4 philosopher_sema is thinking
I am No.3 philosopher_sema
Iter 1, No.3 philosopher_sema is thinking
I am No.2 philosopher_sema
Iter 1, No.2 philosopher_sema is thinking
I am No.1 philosopher_sema
Iter 1, No.1 philosopher_sema is thinking
I am No.0 philosopher_sema
Iter 1, No.0 philosopher_sema is thinking
kernel_execve: pid = 3, name = "priority".

This is run on CPU: #0
priority process will sleep 400 ticks
Iter 1, No.3 philosopher_sema is eating
phi_test_condvar: state_condvar[0] will eating
phi_test_condvar: signal self_cv[0] 
cond_signal begin: cvp c0346b30, cvp->count 0, cvp->owner->next_count 0
cond_signal end: cvp c0346b30, cvp->count 0, cvp->owner->next_count 0
Iter 1, No.0 philosopher_condvar is eating
Iter 1, No.1 philosopher_condvar is eating
phi_test_condvar: state_condvar[2] will eating
phi_test_condvar: signal self_cv[2] 
cond_signal begin: cvp c0346bb8, cvp->count 0, cvp->owner->next_count 0
cond_signal end: cvp c0346bb8, cvp->count 0, cvp->owner->next_count 0
Iter 1, No.2 philosopher_condvar is eating
Iter 1, No.3 philosopher_condvar is eating
Iter 1, No.4 philosopher_condvar is eating
Iter 1, No.0 philosopher_sema is eating
Iter 2, No.4 philosopher_condvar is thinking
Iter 2, No.3 philosopher_condvar is thinking
Iter 2, No.2 philosopher_condvar is thinking
Iter 2, No.1 philosopher_condvar is thinking
Iter 2, No.0 philosopher_condvar is thinking
Iter 2, No.3 philosopher_sema is thinking
Iter 1, No.2 philosopher_sema is eating
Iter 2, No.0 philosopher_sema is thinking
Iter 1, No.4 philosopher_sema is eating
Iter 2, No.2 philosopher_sema is thinking
Iter 1, No.1 philosopher_sema is eating
phi_test_condvar: state_condvar[0] will eating
phi_test_condvar: signal self_cv[0] 
cond_signal begin: cvp c0346b30, cvp->count 0, cvp->owner->next_count 0
cond_signal end: cvp c0346b30, cvp->count 0, cvp->owner->next_count 0
Iter 2, No.0 philosopher_condvar is eating
Iter 2, No.1 philosopher_condvar is eating
phi_test_condvar: state_condvar[2] will eating
phi_test_condvar: signal self_cv[2] 
cond_signal begin: cvp c0346bb8, cvp->count 0, cvp->owner->next_count 0
cond_signal end: cvp c0346bb8, cvp->count 0, cvp->owner->next_count 0
Iter 2, No.2 philosopher_condvar is eating
Iter 2, No.3 philosopher_condvar is eating
Iter 2, No.4 philosopher_condvar is eating
Iter 2, No.4 philosopher_sema is thinking
Iter 2, No.3 philosopher_sema is eating
Iter 2, No.1 philosopher_sema is thinking
Iter 2, No.0 philosopher_sema is eating
Iter 3, No.3 philosopher_condvar is thinking
Iter 3, No.1 philosopher_condvar is thinking
Iter 3, No.4 philosopher_condvar is thinking
Iter 3, No.2 philosopher_condvar is thinking
Iter 3, No.0 philosopher_condvar is thinking
Iter 3, No.3 philosopher_sema is thinking
Iter 2, No.2 philosopher_sema is eating
phi_test_condvar: state_condvar[2] will eating
phi_test_condvar: signal self_cv[2] 
cond_signal begin: cvp c0346bb8, cvp->count 0, cvp->owner->next_count 0
cond_signal end: cvp c0346bb8, cvp->count 0, cvp->owner->next_count 0
Iter 3, No.2 philosopher_condvar is eating
Iter 3, No.1 philosopher_condvar is eating
Iter 3, No.0 philosopher_sema is thinking
Iter 2, No.4 philosopher_sema is eating
phi_test_condvar: state_condvar[0] will eating
phi_test_condvar: signal self_cv[0] 
cond_signal begin: cvp c0346b30, cvp->count 0, cvp->owner->next_count 0
cond_signal end: cvp c0346b30, cvp->count 0, cvp->owner->next_count 0
Iter 3, No.0 philosopher_condvar is eating
Iter 3, No.4 philosopher_condvar is eating
Iter 3, No.3 philosopher_condvar is eating
Iter 3, No.2 philosopher_sema is thinking
Iter 2, No.1 philosopher_sema is eating
Iter 3, No.4 philosopher_sema is thinking
Iter 4, No.1 philosopher_condvar is thinking
phi_test_condvar: state_condvar[3] will eating
phi_test_condvar: signal self_cv[3] 
cond_signal begin: cvp c0346bfc, cvp->count 0, cvp->owner->next_count 0
cond_signal end: cvp c0346bfc, cvp->count 0, cvp->owner->next_count 0
Iter 4, No.2 philosopher_condvar is thinking
Iter 3, No.3 philosopher_sema is eating
Iter 3, No.1 philosopher_sema is thinking
Iter 4, No.3 philosopher_condvar is thinking
Iter 4, No.4 philosopher_condvar is thinking
Iter 4, No.0 philosopher_condvar is thinking
Iter 3, No.0 philosopher_sema is eating
phi_test_condvar: state_condvar[2] will eating
phi_test_condvar: signal self_cv[2] 
cond_signal begin: cvp c0346bb8, cvp->count 0, cvp->owner->next_count 0
cond_signal end: cvp c0346bb8, cvp->count 0, cvp->owner->next_count 0
Iter 4, No.2 philosopher_condvar is eating
Iter 4, No.1 philosopher_condvar is eating
Iter 4, No.3 philosopher_sema is thinking
Iter 3, No.2 philosopher_sema is eating
phi_test_condvar: state_condvar[0] will eating
phi_test_condvar: signal self_cv[0] 
cond_signal begin: cvp c0346b30, cvp->count 0, cvp->owner->next_count 0
cond_signal end: cvp c0346b30, cvp->count 0, cvp->owner->next_count 0
Iter 4, No.0 philosopher_condvar is eating
Iter 4, No.4 philosopher_condvar is eating
Iter 4, No.3 philosopher_condvar is eating
Iter 4, No.0 philosopher_sema is thinking
Iter 3, No.4 philosopher_sema is eating
No.1 philosopher_condvar quit
phi_test_condvar: state_condvar[3] will eating
phi_test_condvar: signal self_cv[3] 
cond_signal begin: cvp c0346bfc, cvp->count 0, cvp->owner->next_count 0
cond_signal end: cvp c0346bfc, cvp->count 0, cvp->owner->next_count 0
No.2 philosopher_condvar quit
Iter 4, No.2 philosopher_sema is thinking
Iter 3, No.1 philosopher_sema is eating
No.3 philosopher_condvar quit
No.4 philosopher_condvar quit
No.0 philosopher_condvar quit
Iter 4, No.4 philosopher_sema is thinking
Iter 4, No.3 philosopher_sema is eating
Iter 4, No.1 philosopher_sema is thinking
Iter 4, No.0 philosopher_sema is eating
No.3 philosopher_sema quit
Iter 4, No.2 philosopher_sema is eating
No.0 philosopher_sema quit
Iter 4, No.4 philosopher_sema is eating
No.2 philosopher_sema quit
Iter 4, No.1 philosopher_sema is eating
No.4 philosopher_sema quit
No.1 philosopher_sema quit
main: fork ok,now need to wait pids.
child pid 18, acc 1308000, time 1401
child pid 17, acc 1080000, time 1401
child pid 16, acc 796000, time 1401
child pid 15, acc 536000, time 1402
child pid 14, acc 272000, time 1403
main: pid 14, acc 272000, time 1403
main: pid 15, acc 536000, time 1403
main: pid 16, acc 796000, time 1403
main: pid 17, acc 1080000, time 1403
main: pid 18, acc 1308000, time 1403
main: wait pids over
stride sched correct result: 1 2 3 4 5
sfs: cleanup: 'simple file system' (262/32506/32768)
all user-mode processes have quit.
init check memory pass.
kernel panic at kern/process/proc.c:468:
    initproc exit.

Welcome to the kernel debug monitor!!
Type 'help' for a list of commands.
K> 